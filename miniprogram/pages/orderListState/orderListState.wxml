<!-- 我的订单页面 -->
<!-- 搜索栏并没有实现相应的功能，同时这里的订单也只是一个静态画面 -->
<!-- 搜索栏 -->
<view class="search">
<view class="search-bar">
  <icon type="search" size="20" color="#999" />
  <input placeholder="搜索我的订单" class="search-input" />
</view>
<image src="{{service}}"></image>
</view>

<!-- 标签栏 -->
<view class="tab-bar">
  <view class="tab-item {{activeTab === 0 ? 'active' : ''}}" data-index="0" bindtap="switchTab">
  <text>待付款</text>
  <span> </span>
  </view>
  <view class="tab-item {{activeTab === 1 ? 'active' : ''}}" data-index="1" bindtap="switchTab">
  <text>待收货</text>
  <span> </span>
  </view>
  <view class="tab-item {{activeTab === 2 ? 'active' : ''}}" data-index="2" bindtap="switchTab">
  <text>待评价</text>
  <span> </span>
  </view>
  <view class="tab-item {{activeTab === 3 ? 'active' : ''}}" data-index="3" bindtap="switchTab">
  <text>已完成</text>
  <span> </span>
  </view>
</view>

<!-- 订单列表 -->
<block wx:for="{{currentOrderList}}" wx:key="orderId" >
  <view class="order-item"  bind:tap="handleOrderTap" data-status="{{item.status}}">
    <view class="order-header">
      <text class="order-time">下单时间：{{item.createTime}}</text>
      <view class="order-status">{{item.statusText}}</view>
    </view>
    <view class="order-merchant">{{item.merchantName}}</view>
    <view class="order-goods">
    <view class="goodImage">
      <block wx:for="{{item.goodsList}}" wx:key="goodsId" wx:for-item="goods"  >
        <image src="{{goods.goodsImg}}" mode="aspectFill" class="goods-img" />
      </block>
    </view>
      <view class="goods-info">
        <text class="goods-price">¥{{item.totalPrice}}</text>
        <text class="goods-desc">共{{item.goodsCount}}件 | 库存: {{item.stock}}</text>
      </view>
    </view>
    <view class="order-buttons" style="margin-left: {{ activeTab === 1 ? '300rpx' :  activeTab ===2 ?'300rpx' :  activeTab === 3 ? '500rpx' : '160rpx'}}">
      <button class="btn-merchant" bindtap="contactMerchant" data-merchantId="{{item.merchantId}}">联系商家</button>
      <button class="btn-modify" bindtap="modifyOrder" data-orderId="{{item.orderId}}" wx:if="{{activeTab===0}}">修改订单</button>
      <button class="btn-pay" bindtap="goToPay" data-orderId="{{item.orderId}}" wx:if="{{activeTab === 0}}">去支付</button>
      <button class="btn-confirm" bindtap="confirmReceipt" data-orderId="{{item.orderId}}" wx:if="{{activeTab === 1}}">确认收货</button>
      <button class="btn-comment" bindtap="goToComment" data-orderId="{{item.orderId}}" wx:if="{{activeTab === 2}}">去评价</button>
    </view>
  </view>
</block>

<view class="empty-state" wx:if="{{currentOrderList.length === 0}}">
  <image src="/images/empty-order.png" class="empty-img" />
  <text class="empty-text">暂无相关订单</text>
</view>